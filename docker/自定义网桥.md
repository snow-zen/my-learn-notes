# 自定义网桥
#Docker 

在 bridge 模式下，容器可以使用自定义的桥接网络。

## 自定义网桥和默认网桥的区别

**用户定义的网桥提供容器之间的 DNS 解析**

默认网桥中的容器只能通过 IP 进行互相访问，而在用户定义的桥接网络上，容器之间可以通过名称或别名进行相互解析。

同时在默认网桥上需要手动通过 `--link` 参数连接到对方容器，才能进行通信，且通信双发容器必须都进行指定。

**用户定义的网桥提供更好的隔离**

由于所有没有指定网络的容器处理默认网桥中。这是一种风险行为，因为不相关的容器也可以与其相互通信。

用户定义的网桥则提供了一个范围网络，只有连接到该网络的容器才能相互访问。

**容器可以从用户定义的网桥中连接或分离**

在容器的生命周期内，可以与用户定义的网络连接或断开。

**每个用户定义的网络都会创建一个可配置的网桥**

对默认的桥接网络进行配置时，配置会对其所有的容器生效。此外，配置默认桥接网络发生在 Docker 本身之外，需要重新启动 Docker。

用户定义的桥接网络是使用 `docker network create`，同时可在创建时单独配置每个网桥。

## 创建桥接网络

例如，创建一个名为 my-net 的桥接网络：

```shell
docker network create my-net
```

同时可以指定子网、IP 地址范围、网关等选项。

## 删除桥接网络

例如，删除一个名为 my-net 的桥接网络：

```shell
docker network rm my-net
```

在删除桥接网络之前，如果还有容器连接，则需要先断开它们。

## 容器连接到用户自定义桥接网络

在创建新容器时，可以通过指定 `--network` 参数来将其连接到指定的网络。例如，创建名为 my-nginx 容器连接到 my-net 网络：

```shell
docker create --name my-nginx \
  --network my-net \
  --publish 8080:80 \
  nginx:latest
```

对于已存在的容器也可以连接到用户自定义桥接网络。例如，将运行中名为 my-nginx 容器连接到 my-net 网络：

```shell
docker network connect my-net my-nginx
```

## 容器断开用户自定义桥接网络

例如，将名为 my-nginx 的容器从 my-net 网络断开：

```shell
docker network disconnect my-net my-nginx
```