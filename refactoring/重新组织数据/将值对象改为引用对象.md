# 将值对象改为引用对象
#Refactoring 

一个数据结构中可能包含多个记录，而这些记录都关联到同一个逻辑数据结构。

## 动机

如果共享的数据需要更新，则值对象需要复制多份的做法就会遇到巨大的困难。此时我必须找到所有的副本，更新所有对象。只要漏掉一个副本没有更新，就会遇见麻烦的数据不一致问题。这种情况下可以考虑将多份数据副本变成单一的引用。

把值对象改为引用对象会带来一个结果：对于一个客观实体，只有一个代表它的对象。这通常意味着我会需要某种形式的仓库，在仓库中可以找到所有这些实体对象。只为每个实体创建一次对象，以后始终从仓库中获取该对象。

## 做法

1. 为相关对象创建一个仓库（如果还没有这样一个仓库的话）。
2. 确保构造函数有办法找到关联对象的正确实例。
3. 修改宿主对象的构造函数，令其从仓库中获取关联对象。每次修改后执行测试。

