# 复合优于继承
#Java 

继承是实现代码重用的有力手段，但它并非永远是完成工作的最佳选择。继承的使用不当会导致软件变得脆弱，在包的内部使用继承是安全的，因为在同一包下子类和父类的实现都处在同一程序员控制下。

继承与方法调用不同的是，继承打破了封装性。子类依赖父类中特定功能的实现细节，而父类实现可能会随着发行版的不同而发生变化，父类发生变化可能破坏子类实现。除非父类是专门为了扩展而设计的，并且具有良好的文档说明。

> 对于专门为了继承而设计并且具有良好文档的类，使用继承也是非常安全的。

通过复合代替继承对方法进行转发所得到的类会非常稳固，它不依赖现有类实现细节。复合还可以通过接口实现[[装饰器模式]]，对原有功能进行增强。有时也可通过复合和转发实现一个较为宽松的委托，从技术角度而言，这不是委托。除非包装实例把自身传递给被包装实例。

## 复合的缺点

通过复合组成的包装类几乎没有什么缺点，但是需要注意一点是，包装类不适合用于回调框架。回调框架中，实例把自身引用传递给其他对象，用于后续调用。因为被包装实例并不知道它外面的包装实例，所以它传递一个指向自身的引用。

> 只有当类真正作为父类的子类型时，才适合使用继承。

在适合使用复合的地方使用继承时，则会不必要暴露实现细节。这样得到的 API 会把你限制在原始实现上，永远限制类的性能。