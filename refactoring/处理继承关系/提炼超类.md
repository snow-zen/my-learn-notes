# 提炼超类
#Refactoring 

## 动机

如果看见两个类在做相似的事，可以利用基本的继承机制把它们的相似之处提炼到父类。可以使用[[字段上移]]把相同的数据搬到父类，使用[[函数上移]]搬移相同的行为。

很多技术作家在谈到面向对象时，认为继承必须预先仔细计划，应该根据“真实世界”的分类结构建立对象模型。真实世界的分类结构可以作为设计继承关系的提示，但还有很多时候，合理的继承关系是在程序演化的过程中才浮现出来的；发现一些共同的元素，希望把它们抽取到一处，于是就有继承关系。

该重构手法相对应的另一种选择是[[提炼类]]。两种方案之间的选择，其实是继承和委托之间的选择，总之目的都是把重复的行为收拢到一处。[[提炼超类]]通常是比较简单的做法，所以会首选这个方案。即便错了，也总有[[以委托取代超类]]可以操作。

## 做法

1. 为原本的类新建一个空白的父类。
2. 测试。
3. 使用[[构造函数本体上移]]、[[函数上移]]和[[字段上移]]手法，逐一将子类的共同元素上移到父类。
4. 检查留在子类中的函数，看它们是否还有共同的成分。如果有，可以先用[[提炼函数]]将其提炼出来，再用[[函数上移]]搬到父类。
5. 检查所有使用原本的类的客户端代码，考虑将其调整为使用超类的接口。