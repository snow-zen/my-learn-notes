# 保护性地编写 readObject 方法
#Java 

对于类中属性存在约束条件时，则需要编写 readObject 方法来保证约束条件不被破坏。

当一个对象被反序列化时，对于客户端不应该拥有的对象引用，如果哪个属性包含了这样的对象引用就必须要做保护性拷贝，这是非常重要的。

编写更加健壮的 readObject 方法，下面列出了一些指导方针：

+ 对于对象引用属性必须保持为私有的类，要保护性的拷贝这些属性中的每个对象。不可变类的可变组件就属于这一类型。
+ 对于任何约束条件，如果检查失败，则抛出一个 InvalidObjectException 异常，这些检查动作应该跟在保护性拷贝后面。
+ 如果整个对象图在反序列化之后必须进行验证，就应该使用 ObjectInputVaildation 接口。
+ 无论是直接方式还是间接方式，都不要调用类中任何可被覆盖的方法。