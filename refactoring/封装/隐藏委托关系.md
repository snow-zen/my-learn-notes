# 隐藏委托关系
#Refactoring 

一个好的模块化设计，“封装”即使不是最关键特征，也是最关键特征之一。

## 动机

封装意味着每个模块都应该尽可能少了解系统的其他部分。如此一旦发生变化，需要了解这一变化的模块就会比较少，这会使变化比较容易进行。

如果某些客户端先通过服务对象的字段得到另一个对象，然后调用后者的函数，那么客户端就必须知晓这一层委托关系。万一受托方修改了接口，变化会波及通过服务对象使用它的所有客户端。

可以在服务对象上放置一个简单的委托函数，将委托关系隐藏起来，从而去除这种依赖。这么一来，即使将委托关系发生变化，变化也只会影响服务对象，而不会直接波及所有客户端。

## 做法

1. 对于每个委托关系中的函数，在服务对象端建立一个简单的委托函数。
2. 调整客户端，令它只调用服务对象提供的函数。每次调整后运行测试。
3. 如果将来不再有任何客户端需要去用受托类，便可移除服务对象中的相关访问函数。
4. 测试。

