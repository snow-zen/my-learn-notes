# 为后代设计接口
#Java 

在 Java 8 发布前，如果不破坏现有接口实现类是无法给接口添加新方法的。在 Java 8 中，增加了默认方法构造，目的就是允许给现有接口添加方法。但即使有默认方法的存在，给现有接口添加新方法也是有风险的，添加的默认方法并不能保证能够在已经存在的实现类中都能正常运行。

例如，Apache Common 库中的 SynchronizedCollections 提供同步集合并对 Collection 接口实现进行包装时，没有覆盖默认的 removeIf 方法，而原有的 removeIf 方法并没有携带同步功能，在多线程环境下调用会导致 ConcurrentModificationException 异常。

有了默认方法存在，在给现有接口实现类添加时可能出现编译时没有报错或者警告，运行时却失败的情况。这个问题虽然并非普遍，但也不是孤立的意外事件。Java 8 在集合接口中添加许多方法是极易受影响的，有些现有实现已知将会受到影响。

因此，建议尽量避免利用默认方法在现有接口上添加新方法，除非有特殊需要，但就算在那样的情况下也应该慎重考虑：默认方法实现是否会破坏现有接口实现。还需要注意的是，默认方法不支持从接口中删除方法，也不支持修改现有方法签名。

结论很明显：尽管默认方法现在已经是 Java 平台组成部分，但谨慎设计接口仍然是至关重要的。因此在发布程序前，最起码不应少于三种实现，每种实现来执行不同任务，确保每个接口都能满足其既定所有用途，还有助于在接口发布之前及时发现其中的缺陷，使你可以轻松纠正过来。但是千万别指望接口程序发布之后也能纠正过来！

