# 移除标记参数
#Refactoring 

调用者使用标记参数来指示被调用函数应该执行哪一部分逻辑。

## 动机

标记参数存在以下几种形式：

+ 布尔值参数。
+ 枚举值参数。
+ 字符串或者符号参数。

标记参数常常让人难以理解到底有哪些函数可以调用、应该怎么调用。标记参数隐藏了函数调用中存在的差异性，使用这种参数还得弄清标记参数有哪些可用的值。

> 其中以布尔类型标记尤其糟糕，因为它们不能清晰地传达其含义。

但是并非所有类似参数都算标记参数。如果调用者传入的是程序中的流动数据，这种参数不算标记参数；只有调用者直接传入字面量值，才是标记参数。

在函数实现内部，如果仅将参数值作为数据传递给其他参数，这也不是标记参数；只有参数值影响了函数内部的控制流，这才算标记参数。

移除标记参数不仅使代码整洁，并且能帮助开发工具更好地发挥作用。但如果一个函数有多个标记参数时，可能就不得不将其保留，否则就得针对各个参数得各种取值得所有组合提供明确的函数。

> 多个标记参数存在时，这也是一个信号。表示这个函数可能做的太多，应该考虑是否能用更简单的函数来组合出完整的逻辑。

## 做法

1. 针对参数的每一种可能值，新建一个明确函数。

> 如果主函数有清晰的条件分发逻辑，可以用[[分解条件表达式]]创建明确函数。否则，可以在原函数之上创建包装函数。

2. 对于“用字面量值作为参数”的函数调用者，将其改为调用新建的明确函数。