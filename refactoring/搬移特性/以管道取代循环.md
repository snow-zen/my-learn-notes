# 以管道取代循环
#Refactoring 

循环已经不再是迭代数据最好的方式。

## 动机

如今越来越多的编程语言都提供了更好的语言结构来处理迭代过程，这种结构就叫作**集合管道**。

集合管道是一种技术。它允许使用一组运算来描述集合的迭代过程，其中每种运算接受的入参和返回值都是一个集合，且运算得到的集合可以供管道的后续流程使用。

## 做法

1. 创建一个变量，用以存放参与循环过程的集合。

> 也可以简单地复制一个现有的变量赋值给新变量。

2. 从循环顶部开始，将循环里的每一块行为依次搬移出来，在上一步创建的集合变量上用一种管道运算替代之。每次修改后运行测试。
3. 搬移完循环里的全部行为后，将循环整个删除。

> 如果循环内部通过累加变量来保存结果，那么移除循环后，将管道运算的最终结果赋值给该累加变量。