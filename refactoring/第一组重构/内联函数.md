# 内联函数
#Refactoring 

简短的函数表现动作意图，这样使代码更加清晰易读。

## 动机

但有时简短的函数其内部代码与名称同样清晰。若果真如此，就应该去掉这个函数，直接使用其中的代码。间接性可能带来帮助，但非必要的间接性总是让人不舒服。

另一种遇到的场景是：有一群组织不甚合理的函数，可以将其都内联到一个大型函数中，再以喜欢的方式重新提炼出小函数。

如果代码中有太多中间层，会使得所有函数都似乎只是对另一个函数的简单委托，造成委托动作之间的晕头转向，此时可以将一些无用的中间层去除。

## 做法

1. 检查函数，确定它不具备多态性。

> 如果函数属于一个类，并且有子类继承了这个函数，那么就无法内联。

2. 找出函数所有的调用点。
3. 将所有调用点都替换为函数本体。
4. 每次替换之后，执行测试。

> 不必一次完成整个内联操作。如果某些调用点比较难以内联，可以等到时机成熟后再处理。

5. 删除该函数定义。

> ⚠️ 注意：内联函数可能碰到的情况多种多样。对于递归调用、多返回点、内联至另一个对象中而该对象并无访问函数等复杂情况时，就不应该使用内联函数。