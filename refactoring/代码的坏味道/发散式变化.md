# 发散式变化
#Refactoring 

我们希望软件是更容易被修改的。一旦需要修改，我们希望能够跳到系统的某一点，只在该处做修改。如果不能做到这点，这就有坏味道。

如果某个模块经常因为不同的原因在不同的方向发生变化，发散式变化就出现了。每当要对某个上下文做修改时，我们只需要理解这个上下文即可，而不必操心另一个。发生这种情况往往出现在后期添加新功能时，你才能发现这个坏味道。在程序刚开发出来还在随着软件系统的能力不断演进时，上下文边界通常不是那么清晰。

如果发生变化的两个方向自然地形成先后次序，就可以使用[[拆分阶段]]将两者分开，两者之间通过一个清晰的数据结构进行沟通。

如果两个方向之间有更多的来回调用，就应该先创建适当的模块，然后用[[搬移函数]]把处理逻辑分开。如果函数内部混合了两类处理逻辑，应该先用[[提炼函数]]将其分开，然后再做搬移。

> 如果模块是以类进行定义的，就可以用[[提炼类]]来做拆分。