# 索引
#MySQL 

索引是存储引擎用于快速找到记录的一种数据结构。索引对于良好的性能非常关键，尤其是当表中的数据量越来越大时时，索引对性能的影响愈发重要。

索引可以包含一个或多个列的值。如果索引包含多个列，那么列的顺序也十分重要，因为 MySQL 只能高效使用索引的最左前缀列。

## 使用 ORM，是否需要关心索引？

使用 ORM，仍然需要理解索引。ORM 工具能够生成符合逻辑的、合法的查询，除非只是生成非常基础的查询，否则它很难生成适合索引的查询。

无论多么复杂的 ORM 工具，在精妙和复杂的索引面前都是 “浮云”。很多时候，即使是查询优化技术专家也很难兼顾到各种情况，更别说 ORM。

## B - Tree 索引

存储引擎以不同的方式使用 B-Tree 索引，性能也各有不同，各有优势。B-Tree 通常意味着所有的值都是按顺序存储的，并且每个叶子页到根的距离相同。

B-Tree 索引能够加快访问数据的速度，因为存储引擎不再需要进行全表扫描来获取需要的数据，取而代之的是从索引的根节点开始进行搜索。

根节点的槽中存放指向子节点的指针，存储引擎根据这些指针向下层查询。通过比较节点页的值和要查询的值找到合适的指针进入下层子节点。这些指针实际上定义了子节点页中的值的上限和下限。叶子节点比较特别，它们的指针指向的是被索引的数据，而不是其他的节点页。

B-Tree 对索引列是顺序组织存储的，所以很适合查询范围数据。

可以使用 B-Tree 索引的查询类型。B-Tree 索引适用于全键值、键值范围或键前缀查询。其中键前缀查询只适用于根据最左前缀的查找。

+ 全值匹配，和索引中的所有列进行匹配。
+ 匹配最左前缀，只使用索引的前几列。
+ 匹配列前缀，只匹配某一列值的开头部分。
+ 匹配范围值，索引可用于在某个范围内查找数据。
+ 精确匹配某一列并范围查询另一列。
+ 只访问索引的查询。

在使用 B-Tree 索引时存在的限制：

+ 如果不是按照索引的最左列开始查找，则无法使用索引。
+ 不能跳过索引中的列。
+ 如果查询中有某个列的范围查询，则其右边所有列都无法使用索引优化查询。

> 索引列的顺序非常重要。在优化性能的时候，可能需要使用相同的列但顺序不同的索引来满足不同类型的查询需求。

