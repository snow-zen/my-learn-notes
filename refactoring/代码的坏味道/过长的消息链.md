# 过长的消息链
#Refactoring 

如果看到用户向一个对象请求另一个对象，然后再向后者请求另一个对象，然后又请求另一个对象 …… 这就是消息链。

采用这种方式，意味这客户端代码将与查询过程中的导航结构紧密耦合。一旦对象间的关系发生任何变化，则客户端就不得不做出相应的修改。

此时应该使用[[隐藏委托关系]]，在消息链的不同位置采用这种重构手法。理论上，可以重构消息链上所有对象，但这么做就会把所有中间对象变为“中间人”。通常更好的选择是：先观察消息链最终得到的对象是用来干什么的，看看能否以[[提炼函数]]把使用该对象的代码提炼到一个独立的函数中，再运用[[搬移函数]]把这个函数推入消息链中。如果还有许多客户端代码需要访问链上的其他对象，同样再添加一个函数即可。

