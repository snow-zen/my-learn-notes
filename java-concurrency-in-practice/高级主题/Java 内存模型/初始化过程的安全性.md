# 初始化过程的安全性
#Java #Multithreading 

如果能确保初始化过程的安全性，那么就可以使得被正确构造的不可变对象在没有同步的情况下也能安全地在多个线程之间共享，而不管它们是如何被发布的。

初始化安全性将确保，对于被正确构造的对象，所有线程都能看到由构造函数对象给各个 final 域设置的正确值，而不管采用何种方式来发布对象。而且，对于可以通过被正确构造对象中某个 final 域到达的任意变量（例如 final 数组中元素，引用的 HashMap 中的内容）将同样对于其他线程是可见的。

> 对于含有 final 域的对象，初始化过程安全性可以防止对对象的初始化引用被重排序到构造过程之前。

当构造函数完成时，构造函数对 final 域的所有写入操作，以及对通过这些域可以到达的任何变量的写入，都将被“冻结”，并且任何获得该对象引用的线程都至少能确保看到被冻结的值。

对于通过 final 域可达的初始变量的写入操作，将不会与构造过程后的操作一起被重排序。初始化安全性只能保证通过 final 域可达的值从构造过程完成时开始的可见效。对于通过非 final 域可达的值，或者在构成过程完成后可能改变的值，必须采用同步来确保可见性。