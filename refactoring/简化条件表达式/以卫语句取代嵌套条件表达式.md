# 以卫语句取代嵌套条件表达式
#Refactoring 

条件表达式通常有两种风格。第一种风格是：两个条件分支都属于正常分支。第二种是：只有一个条件分支是正常行为，另一个分支则是异常的情况。

## 动机

如果某个条件极其罕见，就应该单独检查该条件，并在该条件为真时立刻从函数中返回。这样的单独检查常常被称为“卫语句”。

该重构手法的精髓是：给某一条分支以特别的重视。卫语句不同于其他情况，它告诉阅读者：“这种情况不是本函数的核心逻辑所关心的，如果它真发生了，请做一些必要的整理工作，然后退出”。

## 做法

1. 选中最外层需要被替换的条件逻辑，将其替换为卫语句。
2. 测试。
3. 有需要的话，重复上述步骤。
4. 如果所有卫语句都引发同样的结果，可以使用[[合并条件表达式]]合并之。