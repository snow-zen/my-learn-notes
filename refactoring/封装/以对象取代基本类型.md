# 以对象取代基本类型
#Refactoring 

开发初期，往往决定以简单的数据项表示简单的情况，比如使用数字或字符串。

## 动机

随着开发的进行，你可能发现，简单的数据项不再那么简单。一旦发现某个数据不仅仅局限于打印时，可以为它创建一个新类。可能这个类一开始只是简单包装简单类型，但只要类存在，后续添加业务逻辑就有地方可以存放。

创建新类无须太大的工作量，但它们往往对代码库有深远的影响。实际上，许多经验丰富的开发者认为，这是最实用的重构手法之一。

## 做法

1. 如果变量尚未被封装起来，可以先使用[[封装变量]]封装它。
2. 为这个数据值创建一个简单的类。类的构造函数应该保存这个数据值，并为它提供一个取值函数。
3. 执行静态检查。
4. 修改第一步得到的设值函数，令其创建一个新类的对象并将其存入字段。如有必要，同时修改字段的类型声明。
5. 修改取值函数，令其调用新类的取值函数，并返回结果。
6. 测试。
7. 考虑对第一步得到的访问函数使用[[改变函数声明|函数改名]]，以便更好的反映用途。
8. 考虑应用[[将引用对象改为值对象]]或[[将值对象改为引用对象]]明确指出新对象的角色是值对象还是引用对象。